(()=>{var t={6684:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o=n(8081),r=n.n(o),i=n(3645),a=n.n(i)()(r());a.push([t.id,"",""]);const s=a.toString()},3645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,r,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);o&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),e.push(u))}},e}},8081:t=>{"use strict";t.exports=function(t){return t[1]}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,exports:{}};return t[o](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{const{gMetaBuildingRegistry:t}=shapez,{enumAngleToDirection:e,Vector:o}=shapez,{MetaBalancerBuilding:r}=shapez,{MetaBeltBuilding:i}=shapez,{enumUndergroundBeltVariants:a,MetaUndergroundBeltBuilding:s}=shapez,{UndergroundBeltComponent:c}=shapez,{Entity:l}=shapez,{HUDBuildingPlacerLogic:u}=shapez,{defaultBuildingVariant:d}=shapez,{enumHubGoalRewards:h}=shapez,{Mod:g}=shapez,p="belt",f="regular",B=[5,9,7],m=({$old:n})=>({executeDirectionLockedPlacement(){const t=this.currentMetaBuilding.get();if(!t)return;const e=this.computeDirectionLockPath();let n=!1,o=!1;t.getId()==p?this.root.logic.performBulkOperation((()=>{this.currentBaseRotation=e[0].rotation;for(let t=0;t<e.length;t++){const{tile:r,rotation:i}=e[t];let a=!1;this.currentBaseRotation!=i&&(a=!0,this.currentBaseRotation=i);const s=this.root.map.getLayerContentXY(r.x,r.y,f);if(s){const t=s.components.StaticMapEntity,e=t.getMetaBuilding().getId()==p,n=t.rotation==i;if(!(e&&n||(o=!0,e)))continue}const c=e[t+1],l=c?this.root.map.getLayerContentXY(c.tile.x,c.tile.y,f):null,u=this.root.hubGoals.isRewardUnlocked("reward_smart_tunnel");if((!a||u)&&!o){const r=this.tryPlaceAutoTunnels(l,e,t,a&&u);if(r){n=!0,o=!1,t=r;continue}}this.tryPlaceCurrentBuildingAt(r)&&(n=!0,o=!1)}})):this.root.logic.performBulkOperation((()=>{for(let t=0;t<e.length;++t){const{rotation:o,tile:r}=e[t];this.currentBaseRotation=o,this.tryPlaceCurrentBuildingAt(r)&&(n=!0)}})),n&&this.root.soundProxy.playUi(t.getPlacementSound())},tryPlaceAutoTunnels(n,o,c,l){if(!n)return null;const u=this.currentBaseRotation,g=n.components.ItemAcceptor,m=n.components.StaticMapEntity,y=m.getMetaBuilding().getId()==t.findByClass(r).getId(),v=m.worldToLocalTile(o[c+1].tile);if(g&&g.findMatchingSlot(v,e[u])&&(!y||m.rotation==u))return null;const M=t.findByClass(i),R=t.findByClass(s);let x=this.root.hubGoals.isRewardUnlocked(h.reward_underground_belt_tier_2)?B[1]:B[0];l&&(x=B[2]);let z=null,C=!0,P=!0;for(let t=c+x;t>c;t--){const e=o[t];if(!e||e.rotation!=u)continue;const n=e.tile,r=this.root.map.getLayerContentXY(n.x,n.y,f);if(r){C=!1;const t=r.components.StaticMapEntity,e=r.components.UndergroundBelt;t.getMetaBuilding().getId()==p&&t.rotation==u||(P=!1);const n=z-c>B[0]?1:0,o=t.rotation==u||t.rotation==(u+180)%360;if(e&&e.tier==n&&o)return null}else C?z=t:C=!0}if(P)return null;if(null!=z&&u==o[z].rotation){const t=l?"smart":z-c>B[0]?a.tier2:d;this.currentMetaBuilding.set(R);const e=this.currentBaseRotation,n=this.currentVariant.get();return this.currentBaseRotation=u,this.currentVariant.set(t),this.tryPlaceCurrentBuildingAt(o[c].tile),this.currentBaseRotation=(u+180)%360,this.tryPlaceCurrentBuildingAt(o[z].tile),this.currentBaseRotation=e,this.currentVariant.set(n),this.currentMetaBuilding.set(M),this.currentBaseRotation=u,z}return null}});window.$shapez_registerMod(class extends g{init(){this.modInterface.registerCss(n(6684).Z),this.modInterface.extendClass(u,m)}},{name:"Auto Tunnels",description:"Adds automatic tunnel placement when dragging belts!",website:"https://shapez.mod.io/auto-tunnels",id:"auto-tunnels",version:"1.0.1",author:"Sense_101",settings:{},modId:"1875354"})})()})();